{\rtf1\ansi\ansicpg1252\cocoartf2513
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fswiss\fcharset0 Helvetica-Bold;\f1\fswiss\fcharset0 Helvetica;\f2\fswiss\fcharset0 Helvetica-Oblique;
}
{\colortbl;\red255\green255\blue255;}
{\*\expandedcolortbl;;}
\margl1440\margr1440\vieww10800\viewh8400\viewkind0
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\pardirnatural\partightenfactor0

\f0\b\fs24 \cf0 Generate Kerberos Ticket and Check Status on AnyConnect connection
\f1\b0 \

\f2\i OnConnect_logon.sh\
11-17-17\
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\pardirnatural\partightenfactor0

\f1\i0 \cf0 \
An OnConnect Script triggered after Cisco AnyConnect esablished a connection\
We were experiencing intermittent Kerberos ticket generation. Our SmartCard Software provider (Centrify) stated they refresh Kerberos tickets when a network state change occurred, but that was very intermittent. \
\
Once triggered, this script would initiate a Kerberos ticket request via Centrify\'92s 'sctool' utility. Then read the output/exit code to identify what state the computer was in (Kerberos ticket issued successfully, Network connection not fully established, or SmartCard not available. It would attempt to request this 10 times. \
\
If a kerberos ticket was issued successfully, the user would be prompted that they are now fully connected. This prompt was added because some users were seeing the Cisco AnyConnect gold lock and immediately attempting to connect to an internal resource that required Kerberos. After prompt, a Centrify Update Group Policy was started in the background. \
\
The script also logged directly to the system log for easy troubleshooting in the field. \
\
Sanitized:\
printServer\
orgName}